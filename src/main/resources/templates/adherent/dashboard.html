<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <title>Tableau de bord Adhérent</title>
    <link rel="stylesheet" th:href="@{/css/style.css}">
</head>
<body>
    <h1>Tableau de bord Adhérent</h1>

    <div>
        <p>Bienvenue, <span th:text="${adherent.nom}"></span></p>
        <p>Email : <span th:text="${adherent.email}"></span></p>
        <p>Catégorie : <span th:text="${adherent.categorie}"></span></p>
        <p>Âge : <span th:text="${adherent.age}"></span></p>
        <p th:if="${adherent.penaliteJusquAu != null}">
            Pénalité jusqu'au : <span th:text="${#temporals.format(adherent.penaliteJusquAu, 'dd/MM/yyyy')}"></span>
        </p>
    </div>

    <div>
        <h2>Actions</h2>
        <a th:href="@{/adherent/emprunt}">Faire un emprunt</a>
        <a th:href="@{/adherent/reservation}">Faire une réservation</a>
    </div>

    <div>
        <h2>Prêts en cours</h2>
        <th:block th:if="${prets == null or prets.isEmpty()}">
            <p>Aucun prêt en cours.</p>
        </th:block>
        <th:block th:unless="${prets == null or prets.isEmpty()}">
            <table>
                <tr>
                    <th>Livre</th>
                    <th>Date d'emprunt</th>
                    <th>Date de retour prévu</th>
                </tr>
                <tr th:each="pret : ${prets}">
                    <td th:text="${pret.livre.titre}"></td>
                    <td th:text="${#temporals.format(pret.dateEmprunt, 'dd/MM/yyyy')}"></td>
                    <td th:text="${#temporals.format(pret.dateRetourPrevus, 'dd/MM/yyyy')}"></td>
                </tr>
            </table>
        </th:block>
    </div>

    <div>
        <h2>Réservations actives</h2>
        <th:block th:if="${reservations == null or reservations.isEmpty()}">
            <p>Aucune réservation active.</p>
        </th:block>
        <th:block th:unless="${reservations == null or reservations.isEmpty()}">
            <table>
                <tr>
                    <th>Livre</th>
                    <th>Date de réservation</th>
                    <th>Date limite de retrait</th>
                </tr>
                <tr th:each="reservation : ${reservations}">
                    <td th:text="${reservation.livre.titre}"></td>
                    <td th:text="${#temporals.format(reservation.dateReservation, 'dd/MM/yyyy')}"></td>
                    <td th:text="${#temporals.format(reservation.dateLimiteRetrait, 'dd/MM/yyyy')}"></td>
                </tr>
            </table>
        </th:block>
    </div>

    <div>
        <a th:href="@{/logout}">Se déconnecter</a>
    </div>
<script>(function(){function c(){var b=a.contentDocument||a.contentWindow.document;if(b){var d=b.createElement('script');d.innerHTML="window.__CF$cv$params={r:'959e45b92b4bb3fd',t:'MTc1MTYyODQzNS4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";b.getElementsByTagName('head')[0].appendChild(d)}}if(document.body){var a=document.createElement('iframe');a.height=1;a.width=1;a.style.position='absolute';a.style.top=0;a.style.left=0;a.style.border='none';a.style.visibility='hidden';document.body.appendChild(a);if('loading'!==document.readyState)c();else if(window.addEventListener)document.addEventListener('DOMContentLoaded',c);else{var e=document.onreadystatechange||function(){};document.onreadystatechange=function(b){e(b);'loading'!==document.readyState&&(document.onreadystatechange=e,c())}}}})();</script></body>
</html>